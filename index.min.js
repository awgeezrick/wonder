"use strict";var Config={URL_GET_GOOGLE_AUTOCOMPLETE_DATA:"https://wonder.vannizhang.com/getData",URL_QUERY:"https://api.vannizhang.com/",STATES_ABBREVIATION:{AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"DC",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington State",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}},Controller=function(a){var b=null,f=function(o){b=o},g=function(o){var p=Config.STATES_ABBREVIATION[o];return b[p]},l=function(o,p){var r=new XMLHttpRequest;r.open("GET",o,!0),r.onload=function(){if(!(200<=this.status&&400>this.status));else if(this.response&&p){var s=JSON.parse(this.response);p(s)}},r.onerror=function(){},r.send()};return{loadData:function c(o){var p=Config.URL_GET_GOOGLE_AUTOCOMPLETE_DATA;l(p,function(r){r.error||(f(r),o&&o())})},showInfoPanel:function h(o,p,r){var s="boolean"==typeof r&&r||!a.isSticky();if(s){var t=g(o);a.show(t,p)}},hideInfoPanel:function j(){a.isSticky()||a.hide()},getSearchTerm:function m(o){var p=encodeURI(Config.URL_QUERY+"/getWonderSearchTerm?stateID="+o);l(p)},getTargetQuery:function n(o){var p=encodeURI(Config.URL_QUERY+"getWonderTargetQuery?query="+o);l(p)},toggleStickInfoPanel:function k(o){a.toggleIsSticky(o)}}},SvgMap=function(){var a=null,b=document.querySelectorAll("#Layer1 polygon"),c=document.querySelectorAll("#Layer1 text"),g=function(){b.forEach(function(m){m.addEventListener("mouseover",function(n){h(n)}),m.addEventListener("mouseout",function(){h()}),m.addEventListener("click",function(n){var o=n.currentTarget;k(o),h(n)})})},h=function(m){if(m){var n=m.currentTarget,o=m.clientX,p=n.getAttribute("id"),r=!("click"!==m.type);a.showInfoPanel(p,o,r),j(p)}else a.hideInfoPanel(),j()},j=function(m){b.forEach(function(n){n.id===m?n.classList.add("is-hover"):n.classList.remove("is-hover")}),c.forEach(function(n){n.getAttribute("data-target")===m?n.classList.add("is-hover"):n.classList.remove("is-hover")})},k=function(m){var n=!!m&&m.classList.contains("is-active"),o=m&&!n?m:null;l(o),a.toggleStickInfoPanel(!!o),o&&a.getSearchTerm(m.id)},l=function(m){b.forEach(function(n){n===m?n.classList.add("is-active"):n.classList.remove("is-active")}),c.forEach(function(n){m&&n.getAttribute("data-target")===m.id?n.classList.add("is-active"):n.classList.remove("is-active")})};return{init:function f(m){a=m,g()},setActiveHexPolygon:l}},InfoWindow=function(a){a=a||{};var b=!1,c=null,f=a.container?document.getElementById(a.container):null,g=a.infoWindowOnCloseHandler||null,j=function(){document.querySelectorAll(".js-open-link").forEach(function(t){t.addEventListener("click",function(u){k(u.target.innerHTML)})}),document.querySelectorAll(".js-close-panel").forEach(function(t){t.addEventListener("click",function(){m(),o(!1),g&&g()})})},k=function(t){t=t.replace(/\s/g,"+");var u="https://www.google.com/search?q="+t;c.getTargetQuery(t),window.open(u,"_blank")},m=function(){r(null),f.classList.add("hide")},o=function(t){t="boolean"==typeof t?t:!b,b=t},p=function(t){var u=window.innerWidth/2;!!(t<=u)?f.classList.add("is-right"):f.classList.remove("is-right")},r=function(t){var u=t?s(t):"";f.innerHTML=u,j()},s=function(t){var u=t.map(function(v,w){var y=v.autocompletes.map(function(A){return"<p class=\"font-size--2 trailer-0 js-open-link cursor-pointer\">"+A+"</p>"}).join(""),z=1===w?"is-middle-section":"";return"<div class=\"info-window-content "+z+"\">"+y+"</div>"}).join("");return"<div class=\"info-window\"><div class=\"text-right leader-half\"><span class=\"icon-ui-close margin-right-half cursor-pointer js-close-panel\"></span></div>"+u+"</div>"};return{init:function h(t){return f?void(c=t):void console.error("container DOM ID is required to init info panel")},show:function l(t,u){r(t),p(u),f.classList.remove("hide")},hide:m,toggleIsSticky:o,isSticky:function n(){return b}}};document.addEventListener("DOMContentLoaded",function(){var b=new SvgMap,c=new InfoWindow({container:"infoWindowDiv",infoWindowOnCloseHandler:function infoWindowOnCloseHandler(){b.setActiveHexPolygon(null)}}),f=new Controller(c);f.loadData(function(){c.init(f),b.init(f)})});